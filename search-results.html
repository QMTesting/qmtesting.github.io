---
layout: page
title: 
permalink: /search-results/
redirect_from:
  - /search-results/
---

<nav class="breadcrumbs">
  <a href="/">üè†</a> &gt;
  <span class="current">Search Results</span>
</nav>

<br/><br/>

<div id="search-results-wrapper">
  <h2 id="search-query-title"></h2>
  <div id="search-results" class="search-grid"></div>
  <div id="pagination" class="pagination"></div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const params = new URLSearchParams(window.location.search);
  const query = params.get("q");
  const resultsPerPage = 8; // üîπ Change this to how many results per page
  let currentPage = parseInt(params.get("page")) || 1;

  if (!query) return;

  // Set search title
  const queryTitle = document.getElementById("search-query-title");
  if (queryTitle) {
    queryTitle.textContent = `Search Results for: "${query}"`;
  }

  fetch("/search.json")
    .then(response => response.json())
    .then(data => {
      const lowerQuery = query.toLowerCase();
      const results = data.filter(post =>
        post.title?.toLowerCase().includes(lowerQuery) ||
        post.content?.toLowerCase().includes(lowerQuery) ||
        (post.tags && post.tags.join(" ").toLowerCase().includes(lowerQuery)) ||
        (post.categories && post.categories.join(" ").toLowerCase().includes(lowerQuery))
      );

      if (results.length === 0) {
        document.getElementById("search-results").innerHTML = "<p>No results found.</p>";
        return;
      }

      function updateURL(page) {
        const newParams = new URLSearchParams(window.location.search);
        newParams.set("page", page);
        window.history.replaceState({}, "", `${window.location.pathname}?${newParams}`);
      }

      function renderPage(page) {
        const resultsContainer = document.getElementById("search-results");
        const start = (page - 1) * resultsPerPage;
        const end = start + resultsPerPage;
        const paginatedResults = results.slice(start, end);

        resultsContainer.innerHTML = paginatedResults.map(post => `
          <div class="post-card">
            <a href="${post.url}">
              <img src="${post.image}" alt="${post.title}" />
              <h3>${post.title}</h3>
            </a>
          </div>
        `).join("");

        renderPagination();
        updateURL(page); // üîπ Keep page number in the URL
      }

      function renderPagination() {
        const pagination = document.getElementById("pagination");
        const totalPages = Math.ceil(results.length / resultsPerPage);

        let html = "";

        if (currentPage > 1) {
          html += `<button class="prev-btn">‚¨Ö Previous</button>`;
        }

        html += `<span> Page ${currentPage} of ${totalPages} </span>`;

        if (currentPage < totalPages) {
          html += `<button class="next-btn">Next ‚û°</button>`;
        }

        pagination.innerHTML = html;

       if (document.querySelector(".next-btn")) {
          document.querySelector(".next-btn").addEventListener("click", () => {
            currentPage++;
            renderPage(currentPage);
            setTimeout(() => {
              window.scrollTo({ top: 0, behavior: "smooth" });
            }, 50); // slight delay fixes Firefox
          });
        }
        if (document.querySelector(".prev-btn")) {
          document.querySelector(".prev-btn").addEventListener("click", () => {
            currentPage--;
            renderPage(currentPage);
            setTimeout(() => {
              window.scrollTo({ top: 0, behavior: "smooth" });
            }, 50);
          });
        }

        
      }

      // Initial render
      renderPage(currentPage);
    })
    .catch(error => {
      console.error("Search failed:", error);
      document.getElementById("search-results").innerHTML = "<p>There was an error loading results.</p>";
    });
});
</script>

<style>
  .site-name {
    margin-top:-10px;
  } 

  .post-card h3 {
    text-align: center;
    font-size: 18px;
    line-height: 19px;
  }

 /* .post-card img {
    width: 250px;
    height: 175px;
    object-fit: cover;
    border-radius: 8px;
  } */

  .pagination {
    margin-top: 0px;
    text-align: center;
  }
  .pagination button {
    margin: 0 10px;
    padding: 6px 12px;
    border: none;
    background: #bc960d;
    color: #FFF;
    border-radius: 6px;
    cursor: pointer;
  }
  .pagination button:hover {
    background: #bc960d;
  }

  @media only screen and (min-width: 820px) and (max-width: 2000px) {

      #search-results-wrapper {
        margin-left: -23px;        
      }  
      .pagination {
        margin-left: 370px;
      }  
  }  
</style>

